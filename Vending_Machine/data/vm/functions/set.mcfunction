#> set vending machine
# summon villager (has the ui and items)
summon minecraft:villager ~ ~ ~ {Silent:1b,Invulnerable:1b,NoAI:1b,CustomName:'{"translate":"continer.vm:vending_machine"}',VillagerData:{level:2,profession:"minecraft:cleric"},Offers:{Recipes:[{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:beetroot_soup",Count:1b,tag:{display:{Name:'{"translate":"item.vm:sprite"}'},CustomModelData:96}}},{maxUses:64,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:beetroot_soup",Count:1b,tag:{display:{Name:'{"translate":"item.vm:fanta_orange"}'},CustomModelData:97}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:beetroot_soup",Count:1b,tag:{display:{Name:'{"translate":"item.vm:fanta_grape"}'},CustomModelData:98}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:suspicious_stew",Count:1b,tag:{display:{Name:'{"translate":"item.vm:sprite_cran"}'},CustomModelData:50}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:cookie",Count:1b,tag:{display:{Name:'{"translate":"item.vm:skittles"}'},CustomModelData:78}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:cookie",Count:1b,tag:{display:{Name:'{"translate":"item.vm:granola_bar"}'},CustomModelData:79}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:cookie",Count:1b,tag:{display:{Name:'{"translate":"item.vm:nutella"}'},CustomModelData:77}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:cookie",Count:1b,tag:{display:{Name:'{"translate":"item.vm:snickers"}'},CustomModelData:75}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:cookie",Count:1b,tag:{display:{Name:'{"translate":"item.vm:hershey"}'},CustomModelData:74}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:cookie",Count:1b,tag:{display:{Name:'{"translate":"item.vm:twix"}'},CustomModelData:76}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:cookie",Count:1b,tag:{display:{Name:'{"translate":"item.vm:trail_mix"}'},CustomModelData:80}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:baked_potato",Count:1b,tag:{display:{Name:'{"translate":"item.vm:doritos"}'},CustomModelData:52}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:baked_potato",Count:1b,tag:{display:{Name:'{"translate":"item.vm:lays"}'},CustomModelData:53}}},{maxUses:128,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'{"translate":"item.minecoin:minecoin"}'},CustomModelData:420}},sell:{id:"minecraft:apple",Count:1b,tag:{display:{Name:'{"translate":"item.vm:fruit_snacks"}'},CustomModelData:60}}},]}}

# summon armor stand based off of your rotation
execute at @p[y_rotation=135..179.99] at @e[type=armor_stand,name="vm_set"] run summon armor_stand ~ ~ ~ {Rotation:[180f],DisabledSlots:2039583,NoGravity:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"minecraft:armor_stand",Count:1b,tag:{CustomModelData:520}}],CustomName:"{\"text\":\"Vending Machine\"}"}
execute at @p[y_rotation=-179.99..-135] at @e[type=armor_stand,name="vm_set"] run summon armor_stand ~ ~ ~ {Rotation:[180f],DisabledSlots:2039583,NoGravity:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"minecraft:armor_stand",Count:1b,tag:{CustomModelData:520}}],CustomName:"{\"text\":\"Vending Machine\"}"}
execute at @p[y_rotation=-135..-45] at @e[type=armor_stand,name="vm_set"] run summon armor_stand ~ ~ ~ {Rotation:[270f],DisabledSlots:2039583,NoGravity:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"minecraft:armor_stand",Count:1b,tag:{CustomModelData:520}}],CustomName:"{\"text\":\"Vending Machine\"}"}
execute at @p[y_rotation=-45..45] at @e[type=armor_stand,name="vm_set"] run summon armor_stand ~ ~ ~ {Rotation:[0f],DisabledSlots:2039583,NoGravity:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"minecraft:armor_stand",Count:1b,tag:{CustomModelData:520}}],CustomName:"{\"text\":\"Vending Machine\"}"}
execute at @p[y_rotation=45..135] at @e[type=armor_stand,name="vm_set"] run summon armor_stand ~ ~ ~ {Rotation:[90f],DisabledSlots:2039583,NoGravity:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"minecraft:armor_stand",Count:1b,tag:{CustomModelData:520}}],CustomName:"{\"text\":\"Vending Machine\"}"}
# set stone and stone slab
execute at @e[type=armor_stand,name="Vending Machine"] run setblock ~ ~1 ~ stone_slab[type=top]
execute at @e[type=armor_stand,name="Vending Machine"] run setblock ~ ~ ~ stone
# kills placed armor stand.
kill @e[type=armor_stand,name="vm_set"]